sudo mkdir /etc/cryptsetup-keys.d

sudo dd if=/dev/random \
    of=/etc/cryptsetup-keys.d/luks-$(sudo cryptsetup luksUUID /dev/nvme0n1p2).key \
    bs=512 count=8
    
sudo chmod 0400 /etc/cryptsetup-keys.d/*.key

sudo cryptsetup luksAddKey \
    --pbkdf pbkdf2 \
    --pbkdf-force-iterations 500000 \
    /dev/nvme0n1p2 \
    /etc/cryptsetup-keys.d/luks-$(sudo cryptsetup luksUUID /dev/nvme0n1p2).key
    
sudo vi /etc/dracut.conf.d/cryptodisk.conf

install_items+=" /etc/cryptsetup-keys.d/* "

sudo dracut -vf
